<!DOCTYPE html>
<!-- 
  Tarea: T30 - Responsable: Andy Salcedo - Descripción: Búsquedas guardadas, favoritos y filtros avanzados.
-->
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mink'a - Búsqueda y filtros</title>
    <link rel="icon" type="image/x-icon" href="./favicon.ico" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <link rel="stylesheet" href="./assets/styles/styles.css" />
    <link rel="stylesheet" href="./assets/styles/home.css" />
    <link rel="stylesheet" href="./assets/styles/search.css" />
    <!-- T27 - Miguel Sanca: Scripts de Internacionalización Global -->
    <script src="./assets/scripts/translations.js"></script>
    <script src="./assets/scripts/i18n.js"></script>
  </head>
  <body class="search-page">
    <!-- T15 - Andy Salcedo: Buscador con filtros de categoría, reputación y cercanía -->
    <header class="auth-header">
      <div class="auth-header__container">
        <a href="home.html" class="auth-header__logo" aria-label="Ir a inicio">
          <img
            src="./assets/images/minka-logo.png"
            alt="Mink'a"
            class="logo-image"
          />
        </a>
        <nav class="auth-header__nav" aria-label="Navegación principal">
          <a href="home.html" class="auth-header__link" data-i18n="nav_home"
            >Inicio</a
          >
          <a
            href="busqueda.html"
            class="auth-header__link"
            aria-current="page"
            data-i18n="nav_search"
            >Buscar</a
          >
          <a
            href="publicar.html"
            class="auth-header__link"
            data-i18n="nav_publish"
            >Publicar</a
          >
          <a href="chat.html" class="auth-header__link" data-i18n="nav_chats"
            >Chats</a
          >
          <a href="notificaciones.html" class="auth-header__link">
            <span data-i18n="nav_notifications">Notificaciones</span>
            <span
              class="nav-badge"
              data-unread-badge
              aria-label="notificaciones no leídas"
              >0</span
            >
          </a>
          <a
            href="perfil.html"
            class="auth-header__link"
            data-i18n="nav_profile"
            >Perfil</a
          >
          <a href="auth.html" class="auth-header__link" data-i18n="nav_logout"
            >Salir</a
          >
        </nav>
      </div>
    </header>

    <main class="search-main">
      <section class="search-hero">
        <div class="container">
          <div class="search-hero__content">
            <h1 data-i18n="search_hero_title">Busca y filtra trueques</h1>
            <p data-i18n="search_hero_subtitle">
              Filtra por categoría, reputación y cercanía.
            </p>
          </div>
          <div class="search-bar" role="search">
            <input
              type="search"
              id="search-query"
              placeholder="Buscar por título, tags o distrito"
              aria-label="Buscar publicaciones"
              list="search-history-list"
              data-i18n="search_placeholder"
            />
            <datalist id="search-history-list"></datalist>
            <button
              type="button"
              class="btn btn-primary"
              id="search-btn"
              data-i18n="search_btn"
            >
              Buscar
            </button>
            <!-- T30 - Andy Salcedo: Botón Guardar Búsqueda (HU32) -->
            <button
              type="button"
              class="btn btn-outline"
              id="save-search-btn"
              title="Guardar esta búsqueda"
            >
              <i class="far fa-bookmark"></i>
            </button>
          </div>
          <!-- T30 - Andy Salcedo: Lista de Búsquedas Guardadas (HU32) -->
          <div id="saved-searches-container" class="saved-searches hidden">
            <h3 data-i18n="search_saved_title">Búsquedas Guardadas</h3>
            <ul id="saved-searches-list"></ul>
          </div>
        </div>
      </section>

      <section class="search-layout" aria-label="Resultados de búsqueda">
        <div class="container search-grid">
          <aside class="filters" aria-label="Filtros">
            <div class="filters__header">
              <h2 data-i18n="search_filters_title">Filtros</h2>
              <button
                type="button"
                class="filters__reset"
                id="reset-filters"
                data-i18n="search_filters_reset"
              >
                Limpiar
              </button>
            </div>

            <div class="filters__content">
              <div class="filter-group">
                <label for="filter-category" data-i18n="search_filter_category"
                  >Categoría</label
                >
                <select id="filter-category">
                  <option value="" data-i18n="search_cat_all">Todas</option>
                  <option
                    value="Ropa y accesorios"
                    data-i18n="search_cat_clothing"
                  >
                    Ropa y accesorios
                  </option>
                  <option value="Libros" data-i18n="search_cat_books">
                    Libros
                  </option>
                  <option
                    value="Electrónica"
                    data-i18n="search_cat_electronics"
                  >
                    Electrónica
                  </option>
                  <option value="Hogar" data-i18n="search_cat_home">
                    Hogar
                  </option>
                  <option value="Servicios" data-i18n="search_cat_services">
                    Servicios
                  </option>
                  <option value="Otros" data-i18n="search_cat_others">
                    Otros
                  </option>
                  <option value="favorites" data-i18n="search_cat_favorites">
                    ❤️ Mis Favoritos
                  </option>
                </select>
              </div>

              <!-- T30 - Andy Salcedo: Exclusiones (HU34) -->
              <div class="filter-group">
                <label for="filter-exclude" data-i18n="search_filter_exclude"
                  >Excluir Categoría</label
                >
                <select id="filter-exclude">
                  <option value="" data-i18n="search_exclude_none">
                    Ninguna
                  </option>
                  <option
                    value="Ropa y accesorios"
                    data-i18n="search_cat_clothing"
                  >
                    Ropa y accesorios
                  </option>
                  <option value="Libros" data-i18n="search_cat_books">
                    Libros
                  </option>
                  <option
                    value="Electrónica"
                    data-i18n="search_cat_electronics"
                  >
                    Electrónica
                  </option>
                  <option value="Hogar" data-i18n="search_cat_home">
                    Hogar
                  </option>
                  <option value="Servicios" data-i18n="search_cat_services">
                    Servicios
                  </option>
                </select>
              </div>

              <div class="filter-group">
                <label for="filter-rating" data-i18n="search_filter_rating"
                  >Reputación mínima</label
                >
                <div class="range-wrapper">
                  <input
                    type="range"
                    id="filter-rating"
                    min="0"
                    max="5"
                    step="0.5"
                    value="0"
                  />
                  <div class="filter-group__hint">
                    <span id="filter-rating-value">0</span>
                    <span data-i18n="search_rating_stars">estrellas o más</span>
                  </div>
                </div>
              </div>

              <!-- T31 - Andy Salcedo: Tu Ubicación (HU36) -->
              <div class="filter-group">
                <label
                  for="filter-user-location"
                  data-i18n="search_filter_location"
                  >Tu Ubicación</label
                >
                <div style="display: flex; gap: 0.5rem">
                  <input
                    type="text"
                    id="filter-user-location"
                    placeholder="Ej. Miraflores"
                    style="flex: 1"
                    data-i18n="search_location_placeholder"
                  />
                  <button
                    type="button"
                    id="btn-get-location"
                    class="btn btn-outline"
                    title="Usar mi ubicación actual"
                    style="padding: 0.5rem"
                  >
                    <i class="fa-solid fa-crosshairs"></i>
                  </button>
                </div>
              </div>

              <div class="filter-group">
                <label for="filter-distance" data-i18n="search_filter_distance"
                  >Cercanía</label
                >
                <div class="range-wrapper">
                  <input
                    type="range"
                    id="filter-distance"
                    min="1"
                    max="30"
                    step="1"
                    value="15"
                  />
                  <div class="filter-group__hint">
                    <span data-i18n="search_distance_up_to">Hasta</span>
                    <span id="filter-distance-value">15</span>
                    <span data-i18n="search_distance_km">km</span>
                  </div>
                </div>
              </div>

              <div class="filter-group">
                <label for="filter-sort" data-i18n="search_filter_sort"
                  >Ordenar por</label
                >
                <select id="filter-sort">
                  <option value="relevance" data-i18n="search_sort_relevance">
                    Relevancia
                  </option>
                  <option value="distance" data-i18n="search_sort_distance">
                    Menor distancia
                  </option>
                  <option value="rating" data-i18n="search_sort_rating">
                    Mayor reputación
                  </option>
                </select>
              </div>
            </div>
          </aside>

          <div class="search-results-wrapper">
            <section class="results" aria-live="polite">
              <div class="results__header">
                <h2 data-i18n="search_results_title">Resultados</h2>
                <p id="results-count">
                  0 <span data-i18n="search_results_count">resultados</span>
                </p>
              </div>
              <div class="results__grid" id="results-list"></div>
            </section>

            <aside class="map-panel" aria-label="Mapa de cercanía">
              <div class="map-panel__header">
                <h3>Mapa</h3>
                <p>
                  Se muestran los distritos de referencia según la distancia.
                </p>
              </div>
              <div class="map-panel__body">
                <img
                  src="./assets/images/mapa-ejemplo-minka.png"
                  alt="Mapa referencial"
                  class="map-panel__image"
                  loading="lazy"
                />
              </div>
            </aside>
          </div>
        </div>
      </section>
    </main>

    <script src="./assets/scripts/notif-badge.js" defer></script>
    <script src="./assets/scripts/search.js"></script>
  </body>
</html>
