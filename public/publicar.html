<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mink'a - Publicar Objeto</title>
    <link rel="icon" type="image/x-icon" href="./favicon.ico" />
    <link rel="stylesheet" href="./assets/styles/styles.css" />
    <link rel="stylesheet" href="./assets/styles/home.css" />
    <link rel="stylesheet" href="./assets/styles/publish.css" />
  </head>
  <body class="publish-page">
    <!-- T14 - Ronel Rojas: Formulario de publicación con carga de fotos y QR -->
    <!-- T23 - Ronel Rojas: Gestión avanzada - estados, campos dinámicos por categoría -->
    <header class="auth-header">
      <div class="auth-header__container">
        <a href="home.html" class="auth-header__logo" aria-label="Ir a inicio">
          <img
            src="./assets/images/minka-logo.png"
            alt="Mink'a"
            class="logo-image"
          />
        </a>
        <nav class="auth-header__nav" aria-label="Navegación principal">
          <a href="home.html" class="auth-header__link">Inicio</a>
          <a href="busqueda.html" class="auth-header__link">Buscar</a>
          <a href="publicar.html" class="auth-header__link" aria-current="page"
            >Publicar</a
          >
          <a href="chat.html" class="auth-header__link">Chats</a>
          <a href="notificaciones.html" class="auth-header__link">
            Notificaciones
            <span
              class="nav-badge"
              data-unread-badge
              aria-label="notificaciones no leídas"
              >0</span
            >
          </a>
          <a href="perfil.html" class="auth-header__link">Perfil</a>
          <a href="auth.html" class="auth-header__link">Salir</a>
        </nav>
      </div>
    </header>

    <main class="publish-main">
      <!-- T14 - Ronel Rojas: Hero y contexto de publicación -->
      <section class="publish-hero">
        <div class="container">
          <div class="publish-hero__content">
            <h1>Publica un objeto</h1>
            <p>
              Completa los datos, sube fotos y te generamos un QR único para
              compartir tu publicación.
            </p>
          </div>
        </div>
      </section>

      <!-- T14 - Ronel Rojas: Formulario de publicación y QR -->
      <section class="publish-layout" aria-label="Formulario de publicación">
        <div class="container publish-grid">
          <form id="publish-form" class="publish-form" novalidate>
            <div class="card">
              <div class="card__header">
                <h2>Información principal</h2>
                <p>Define qué ofreces y en qué estado se encuentra.</p>
              </div>
              <div class="card__body">
                <div class="form__group">
                  <label for="item-title">Título del objeto</label>
                  <input
                    type="text"
                    id="item-title"
                    name="title"
                    placeholder="Ej. Bicicleta urbana vintage"
                    required
                  />
                  <p class="form__error" data-error-for="item-title"></p>
                </div>

                <div class="form__row">
                  <div class="form__group">
                    <label for="item-category">Categoría</label>
                    <select id="item-category" name="category" required>
                      <option value="">Selecciona una opción</option>
                      <option value="Ropa y accesorios">
                        Ropa y accesorios
                      </option>
                      <option value="Libros">Libros</option>
                      <option value="Electrónica">Electrónica</option>
                      <option value="Hogar">Hogar</option>
                      <option value="Servicios">Servicios</option>
                      <option value="Otros">Otros</option>
                    </select>
                    <p class="form__error" data-error-for="item-category"></p>
                  </div>

                  <div class="form__group">
                    <label for="item-condition">Estado</label>
                    <select id="item-condition" name="condition" required>
                      <option value="">Selecciona una opción</option>
                      <option value="Nuevo">Nuevo</option>
                      <option value="Como nuevo">Como nuevo</option>
                      <option value="Buen estado">Buen estado</option>
                      <option value="Para reparar">Para reparar</option>
                    </select>
                    <p class="form__error" data-error-for="item-condition"></p>
                  </div>
                </div>

                <div class="form__row">
                  <div class="form__group">
                    <label for="item-status">Estado de la publicación</label>
                    <select id="item-status" name="status">
                      <option value="activo">Activo</option>
                      <option value="pausado">Pausado</option>
                      <option value="reservado">Reservado</option>
                    </select>
                    <p class="form__hint">
                      Pausar oculta la publicación de búsquedas.
                    </p>
                  </div>
                  <div class="form__group form__group--inline">
                    <label class="inline-label" for="item-reserved"
                      >Reserva</label
                    >
                    <label class="switch">
                      <input type="checkbox" id="item-reserved" />
                      <span class="switch-slider"></span>
                    </label>
                    <p class="form__hint">
                      Marca si ya tienes un interesado confirmado.
                    </p>
                  </div>
                </div>

                <div class="form__group" id="dynamic-fields" aria-live="polite">
                  <!-- Campos dinámicos por categoría -->
                </div>

                <div class="form__group">
                  <label for="item-description">Descripción</label>
                  <textarea
                    id="item-description"
                    name="description"
                    rows="4"
                    placeholder="Cuenta detalles, medidas, funcionamiento y qué buscas a cambio"
                    required
                  ></textarea>
                  <p class="form__error" data-error-for="item-description"></p>
                </div>

                <div class="form__group">
                  <label for="item-tags">Etiquetas</label>
                  <input
                    type="text"
                    id="item-tags"
                    name="tags"
                    placeholder="ej. urbano, mujer, talla M, poco uso"
                  />
                  <p class="form__hint">
                    Separadas por coma · Mejora el hallazgo en búsquedas.
                  </p>
                </div>
              </div>
            </div>

            <div class="card">
              <div class="card__header">
                <h2>Ubicación y entrega</h2>
                <p>
                  Indica dónde está el objeto y cómo prefieres el intercambio.
                </p>
              </div>
              <div class="card__body">
                <div class="form__row">
                  <div class="form__group">
                    <label for="item-location">Distrito / Ciudad</label>
                    <input
                      type="text"
                      id="item-location"
                      name="location"
                      placeholder="Ej. Miraflores, Lima"
                      required
                    />
                    <p class="form__error" data-error-for="item-location"></p>
                  </div>
                  <div class="form__group">
                    <label for="item-availability">Disponibilidad</label>
                    <select id="item-availability" name="availability" required>
                      <option value="">Selecciona una opción</option>
                      <option value="Mañanas">Mañanas</option>
                      <option value="Tardes">Tardes</option>
                      <option value="Noches">Noches</option>
                      <option value="Fines de semana">Fines de semana</option>
                    </select>
                    <p
                      class="form__error"
                      data-error-for="item-availability"
                    ></p>
                  </div>
                </div>

                <div class="form__row">
                  <div class="form__group">
                    <label>Modalidad</label>
                    <div
                      class="chip-group"
                      role="group"
                      aria-label="Modalidad de entrega"
                    >
                      <label class="chip">
                        <input
                          type="checkbox"
                          name="mode"
                          value="Recojo en persona"
                          checked
                        />
                        <span>Recojo en persona</span>
                      </label>
                      <label class="chip">
                        <input
                          type="checkbox"
                          name="mode"
                          value="Envío coordinado"
                        />
                        <span>Envío coordinado</span>
                      </label>
                    </div>
                  </div>
                  <div class="form__group">
                    <label for="item-notes">Notas para el encuentro</label>
                    <textarea
                      id="item-notes"
                      name="notes"
                      rows="3"
                      placeholder="Punto de referencia, seguridad, horarios exactos"
                    ></textarea>
                  </div>
                </div>
              </div>
            </div>

            <div class="card">
              <div class="card__header">
                <h2>Fotos del objeto</h2>
                <p>Sube hasta 5 fotos. Formatos JPG o PNG.</p>
              </div>
              <div class="card__body">
                <div class="upload-area">
                  <input
                    type="file"
                    id="item-photos"
                    name="photos"
                    accept="image/*"
                    multiple
                    aria-describedby="photo-help"
                  />
                  <label for="item-photos" class="upload-area__label">
                    <span class="upload-area__title"
                      >Arrastra o selecciona fotos</span
                    >
                    <span class="upload-area__hint"
                      >Máximo 5 imágenes · 4MB c/u</span
                    >
                  </label>
                  <p id="photo-help" class="form__hint">
                    Las fotos son de ejemplo.
                  </p>
                </div>
                <div
                  class="preview-grid"
                  id="photo-preview"
                  aria-live="polite"
                ></div>
              </div>
            </div>

            <div class="form__actions">
              <button type="button" class="btn btn-secondary" id="save-draft">
                Guardar borrador
              </button>
              <button
                type="submit"
                class="btn btn-primary btn-large"
                id="generate-qr"
              >
                Publicar
              </button>
            </div>
            <p
              class="form__success"
              id="form-success"
              role="status"
              aria-live="polite"
            ></p>
          </form>

          <aside class="publish-summary" aria-label="Resumen y QR">
            <div class="summary-card">
              <h3>Resumen rápido</h3>
              <ul class="summary-list">
                <li>
                  <strong>Título:</strong> <span id="summary-title">—</span>
                </li>
                <li>
                  <strong>Categoría:</strong>
                  <span id="summary-category">—</span>
                </li>
                <li>
                  <strong>Ubicación:</strong>
                  <span id="summary-location">—</span>
                </li>
                <li>
                  <strong>Disponibilidad:</strong>
                  <span id="summary-availability">—</span>
                </li>
                <li>
                  <strong>Estado:</strong>
                  <span id="summary-status">Activo</span>
                </li>
                <li>
                  <strong>Reserva:</strong>
                  <span id="summary-reserved">No</span>
                </li>
              </ul>
              <p class="form__hint">
                El QR se generará automáticamente al publicar.
              </p>
            </div>
          </aside>
        </div>
      </section>
    </main>

    <script src="./assets/scripts/notif-badge.js" defer></script>
    <script src="./assets/scripts/publish.js"></script>
  </body>
</html>
