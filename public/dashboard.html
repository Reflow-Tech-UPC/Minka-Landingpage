<!doctype html>
<!-- 
  Tarea: T26 - Responsable: Miguel Sanca - Descripción: Dashboard de impacto con gráficas y KPIs acumulados.
-->
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mink'a - Dashboard de Impacto</title>
    <link rel="icon" type="image/x-icon" href="./favicon.ico" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <!-- Arquitectura CSS modular -->
    <link rel="stylesheet" href="./assets/styles/base.css" />
    <link rel="stylesheet" href="./assets/styles/components.css" />
    <link rel="stylesheet" href="./assets/styles/layout.css" />
    <link rel="stylesheet" href="./assets/styles/pages/dashboard.css" />
    <link rel="stylesheet" href="./assets/styles/responsive.css" />
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Scripts core -->
    <script defer src="./assets/scripts/core/components.js"></script>
    <script defer src="./assets/scripts/core/translations.js"></script>
    <script defer src="./assets/scripts/core/i18n.js"></script>
  </head>
  <body class="dashboard-page">
    <!-- Navegación generada por components.js -->
    <header id="app-header" class="auth-header"></header>

    <main class="dashboard-main">
      <div class="container">
        <!-- T26 - Miguel Sanca: Encabezado del Dashboard -->
        <section class="dashboard-header">
          <div class="dashboard-title">
            <h1>Dashboard de Impacto</h1>
            <p>Visualiza tu contribución ambiental y el ahorro generado.</p>
          </div>
          <div class="dashboard-actions">
            <div class="filter-group">
              <label for="period-filter">Periodo:</label>
              <select id="period-filter" class="form-select">
                <option value="7">Últimos 7 días</option>
                <option value="30" selected>Últimos 30 días</option>
                <option value="90">Últimos 3 meses</option>
                <option value="365">Último año</option>
                <option value="custom">Personalizado</option>
              </select>
            </div>
            <div
              id="custom-date-group"
              class="filter-group"
              style="display: none"
            >
              <input
                type="date"
                id="start-date"
                class="form-select"
                aria-label="Fecha inicio"
              />
              <span style="color: var(--color-gray-600)">-</span>
              <input
                type="date"
                id="end-date"
                class="form-select"
                aria-label="Fecha fin"
              />
            </div>
            <div class="filter-group">
              <label for="category-filter">Categoría:</label>
              <select id="category-filter" class="form-select">
                <option value="all">Todas</option>
              </select>
            </div>
            <button id="export-btn" class="btn btn-outline">
              <i class="fas fa-download"></i> Exportar Reporte
            </button>
          </div>
        </section>

        <!-- T26 - Miguel Sanca: KPIs -->
        <div
          id="no-data-message"
          class="no-data-container"
          style="display: none"
        >
          <div class="no-data-content">
            <i class="fas fa-leaf no-data-icon"></i>
            <h3>Sin actividad registrada</h3>
            <p>
              No hay datos de impacto para el periodo y filtros seleccionados.
            </p>
          </div>
        </div>

        <section class="kpi-grid" id="kpi-section">
          <div class="kpi-card">
            <div class="kpi-icon kpi-icon--co2">
              <i class="fas fa-cloud"></i>
            </div>
            <div class="kpi-content">
              <span class="kpi-value" id="kpi-co2">0</span>
              <span class="kpi-unit">kg</span>
              <span class="kpi-label">CO₂ Evitado</span>
            </div>
          </div>
          <div class="kpi-card">
            <div class="kpi-icon kpi-icon--water">
              <i class="fas fa-tint"></i>
            </div>
            <div class="kpi-content">
              <span class="kpi-value" id="kpi-water">0</span>
              <span class="kpi-unit">L</span>
              <span class="kpi-label">Agua Ahorrada</span>
            </div>
          </div>
          <div class="kpi-card">
            <div class="kpi-icon kpi-icon--objects">
              <i class="fas fa-box-open"></i>
            </div>
            <div class="kpi-content">
              <span class="kpi-value" id="kpi-objects">0</span>
              <span class="kpi-unit">u.</span>
              <span class="kpi-label">Objetos Reusados</span>
            </div>
          </div>
        </section>

        <!-- T26 - Miguel Sanca: Gráficas -->
        <section class="charts-grid" id="charts-section">
          <div class="chart-card">
            <h3>Evolución de Impacto</h3>
            <div class="chart-container">
              <canvas id="evolutionChart"></canvas>
            </div>
          </div>
          <div class="chart-card">
            <h3>Impacto por Categoría</h3>
            <div class="chart-container">
              <canvas id="categoryChart"></canvas>
            </div>
          </div>
        </section>
      </div>
    </main>

    <script src="./assets/scripts/core/notif-badge.js"></script>
    <script src="./assets/scripts/pages/dashboard.js"></script>
  </body>
</html>
